{% extends 'base.html' %}

{% block title %}Patients - EEG Analysis System{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="display-6 text-primary">
      <i class="fas fa-users"></i> Patients
    </h1>
    <a href="{{ url_for('add_patient') }}" class="btn btn-success shadow-sm">
      <i class="fas fa-user-plus"></i> Add Patient
    </a>
  </div>

  {% if patients %}
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-hover align-middle">
      <thead class="table-success">
        <tr>
          <th>#</th>
          <th><i class="fas fa-user"></i> Name</th>
          <th><i class="fas fa-birthday-cake"></i> Age</th>
          <th><i class="fas fa-venus-mars"></i> Gender</th>
          <th><i class="fas fa-diagnoses"></i> Diagnosis</th>
          <th><i class="fas fa-calendar"></i> Created</th>
          <th><i class="fas fa-cogs"></i> Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for patient in patients %}
        <tr>
          <td>{{ loop.index }}</td>
          <td>{{ patient.name }}</td>
          <td>{{ patient.age }}</td>
          <td>{{ patient.gender }}</td>
          <td>{{ patient.diagnosis or "N/A" }}</td>
          <td>{{ patient.created_at.strftime('%Y-%m-%d') }}</td>
          <td>
            <a href="{{ url_for('patient_detail', id=patient.id) }}" class="btn btn-sm btn-info">
              <i class="fas fa-eye"></i>
            </a>
            <a href="{{ url_for('update_patient', id=patient.id) }}" class="btn btn-sm btn-warning">
              <i class="fas fa-edit"></i>
            </a>
            <a href="{{ url_for('delete_patient', id=patient.id) }}" class="btn btn-sm btn-danger"
              onclick="return confirm('Are you sure you want to delete this patient?');">
              <i class="fas fa-user-times"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="text-center py-5">
    <i class="fas fa-users fa-4x text-muted mb-3"></i>
    <h5>No patients found</h5>
    <p class="text-muted">Start by adding your first patient!</p>
    <a href="{{ url_for('add_patient') }}" class="btn btn-success">
      <i class="fas fa-user-plus"></i> Add Patient
    </a>
  </div>
  {% endif %}
</div>

<style>
  .btn {
    transition: all 0.2s ease;
    border-radius: 8px;
  }
  .btn:hover {
    transform: scale(1.07);
  }
  table thead th {
    font-weight: 600;
    background: linear-gradient(135deg, #63e6be, #74c0fc);
    color: white;
  }
</style>
{% endblock %}